# Домашнее задание "Фон-Нейман"
В данной папке реализовано 2 первых задания.

## Структура задания:
В папке src лежат исходные коды виртуальной машины и транслятора ассемблера в байткод.
В папке assembler лежат соответствующие программы на ассемблере.
В папке programms лежат байткоды программ.

## Cхема использования транслятора и виртуальной машины:
./vm programm.bin - запуск на виртуальной машине программы, programm.bin - байткод программы
./translator assembler programm.bin - транслирование кода ассемблера из файла assembler и запись полученного байткода в programm.bin 


## Описание виртуальной машины:
Байткод программы состоит из 3 частей - первые 20 байтов - значения регистров - ip, ax, bx, cx, dx. Регистры могут принимать только положительные значения, которые помещаются в 4 байта.
Далее идет секция data, где помещается вспомогательная для программы информация. И в конце идет последовательность команд.
Каждая команда занимает 9 байт: 1байт - номер команды, 4байт - первый аргумент, 4байт - второй аргумент.
### Описание команд виртуальной машины:
_ - обозначаются фиктивные аргументы
* 0 _ _ - завершение работы
* 1 addr n - вывод n байтов начиная с addr
* 2 addr1 addr2 - запись значения из addr2 в addr1
* 3 addr val - запись значения val в addr
* 4 addr val - прибавить значение val к значению в addr
* 5 addr1 addr2 - прибавить к значению в addr1 значение из addr2
* 6 addr val - вычесть значение val из значения в addr
* 7 addr1 addr2 - вычесть из значения из addr1 значение из addr2 
* 8 addr1 addr2 - поменять значения местами по адресам addr1 и addr2
* 9 addr _ - сдвинуть ip на addr
* 10 addr _ - сдвинуть ip на addr если значение cx больше 0
* 11 addr _ - вывести значение из addr 
* 12 addr _ - считать с потока ввода int и записать по addr


## Описание ассемблера:
Обращение к регистрам происходит через $. То есть чтобы обратиться к регистру ax нужно написать $ax.
На каждой строке распалагается ровно одна комманда или метка.
Метка пишется :label - label - название метки. Для каждой команды аргументы пишутся через пробел
### Описание команд ассемблера:
* write "string" - вывод на экран строки string
* write $ax - вывод на экран значения регистра
* read $reg - считать с потока ввода значение в регистр reg
* mov $reg val - установить в регистр reg значение val
* sub $reg val - вычесть из значения регистра reg значение val
* add $reg1 $reg2 - добавить к значению регистра reg1 значение регистра reg2
* je label - перейти на метку label если значение регистра cx равно 0, иначе ничего не делать
* jump label - перейти на метку label
* swap $reg1 $reg2 - поменять местами значения в регистрах reg1 и reg2
